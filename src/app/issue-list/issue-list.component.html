<!--
* @license
* (c) Copyright 2019 | MY-D Foundation | Created by Matthew Moy de Vitry
* Use of this code is governed by the GNU Affero General Public License (https://www.gnu.org/licenses/agpl-3.0)
* and the profit contribution agreement available at https://www.my-d.org/ProfitContributionAgreement
-->
<div mat-dialog-title>
  <button class="close" mat-stroked-button color="warn" mat-dialog-close >
    <!--    <mat-icon inline >close</mat-icon>-->
    <span>close</span>
  </button>
  <h1>Data processing issues</h1>
</div>

<mat-card *ngFor="let issue of (dataIssues$ | async)">
  <h2 mat-card-title>{{issue.level}}: {{issue.property_id}}</h2>
  <h3 mat-card-subtitle>{{issue.fountain_name}}</h3>
  <mat-card-content>
    <pre>
    {{issue.message}}
    </pre>
  </mat-card-content>
  <mat-card-actions>
    <a mat-stroked-button target="_blank" href="{{'/'+(city$ | async)+'?i='+(issue.id_wikidata || issue.id_osm)}}">
      <mat-icon inline>open_in_new</mat-icon>
      view fountain
    </a>
  </mat-card-actions>
</mat-card>

<p *ngIf="(dataIssues$|async).length === 0">No issues were found.</p>
